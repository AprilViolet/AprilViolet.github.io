"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return r[e].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}a.m=r,a.c=n,a.p="",a(0)}([function(n,e,a){(function(e){var H=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},N=a(1),j=r(a(2)),F=r(a(3)),I=r(a(4)),D=r(a(5));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var P="object"==("undefined"==typeof window?"undefined":t(window))&&window.window===window?window:"object"==(void 0===e?"undefined":t(e))&&e.global===e?e:void 0;P.mePlayer=function(e,t){if(e.music&&e.music.src){var r=e.music,n=D.$(e.target)||document.querySelector(".meplayer"),s=e.theme||N.THEME_DEFAULT,c=!!r.lrc,a=r.cover||"https://unsplash.it/78/?random",i=r.loop||!1,l=e.autoplay,o=s===N.THEME_DEFAULT?"meplayer-container":"meplayer-container-mini",u='<div class="'+(o+" "+(c?"meplayer-haslrc":"")+" meplayer-isloading")+'">\n                             <audio src='+r.src+' preload="auto"></audio>\n                             <div class="meplayer-info">\n                             <div class="meplayer-info-cover"><img src='+a+' alt=""></div>\n                             <div class="meplayer-meta">\n                             <div class="meplayer-meta-title">'+r.title+'</div>\n                             <div class="meplayer-meta-author">'+r.author+'</div>\n                             <div class="meplayer-meta-time-tick"><span class="meplayer-meta-time-tick-text"></span></div>\n                             </div>\n                             </div>\n                             <canvas class="meplayer-spectrum"></canvas>\n                             <div class="meplayer-lyric"><div class="meplayer-lyric-area"></div></div>\n                             <div class="meplayer-control"><div class="meplayer-control-play"><i class="icon-play"></i><i class="icon-pause"></i></div></div>\n                             <div class="meplayer-volume-bg"><div class="meplayer-volume"><i class="icon-volume"></i><div class="meplayer-volume-progress"></div></div></div>\n                             <div class="meplayer-duration"><i class="icon-clock"></i><span class="meplayer-duration-text">loading</span></div>\n                             <div class="meplayer-loadingsign"><i class="icon-spin animate-spin"></i>loading</div>\n                             <div class="meplayer-timeline-bg"><div class="meplayer-timeline"><div class="meplayer-timeline-passed"></div></div></div>\n                             </div>';n.innerHTML=u;var p,y=n.querySelector("."+o),d=D.init(y).select(["audio",".meplayer-control-play",".meplayer-meta-time-tick-text",".meplayer-duration",".meplayer-timeline",".meplayer-timeline-passed",".meplayer-volume",".meplayer-volume-progress",".meplayer-lyric-area",".meplayer-spectrum"]),m=H(d,10),v=m[0],f=m[1],h=m[2],g=m[3],E=m[4],S=m[5],T=m[6],x=m[7],L=m[8],b=m[9];c?j.parse(r.lrc).renderTo(L):I.init(b),v.addEventListener("ended",_),v.addEventListener("canplaythrough",w),v.addEventListener("durationchange",C),v.addEventListener("timeupdate",M),f.addEventListener("click",A),E.addEventListener("click",q),l&&A(),P.mePlayerMethod={play:function(){v.paused&&(F.addClass(y,"meplayer-isplaying"),v.play())},pause:function(){v.paused||(F.removeClass(y,"meplayer-isplaying"),v.pause())},toggleTheme:function(){var t=.03,r=0,n=200;return F.addClass(y,"meplayer-changing-theme"),s=s===N.THEME_DEFAULT?N.THEME_MINI:N.THEME_DEFAULT,function e(){r++;y.style.opacity-=t;y.style.opacity<=0&&(t*=-1,y.style.opacity=0,F.toggleClass(y,"meplayer-container-mini"),F.toggleClass(y,"meplayer-container"));y.style.opacity<1&&r<n?requestAnimationFrame(e):setTimeout(function(){F.removeClass(y,"meplayer-changing-theme")},500)}(),s}}}else console.error("必须指定音乐地址哦~");function _(){i?v.play():(F.removeClass(y,"meplayer-isplaying"),t())}function w(){p=this.duration,setTimeout(function(){F.removeClass(y,"meplayer-isloading"),g.querySelector(".meplayer-duration-text").innerText=F.parseSec(p.toFixed(0))},1e3)}function C(){p=this.duration}function M(){var e=v.currentTime,t=v.currentTime.toFixed(3),r=e/p*100;if(S.style.width=r.toFixed(2)+"%",h.innerText=F.parseSec(e),c&&s===N.THEME_DEFAULT){var n=j.currentIndex(t),a=L.querySelectorAll("p"),i=a[n-1],l=a[n],o=a[n+1];l.className.includes("meplayer-lyric-current")||(F.removeClass(L.querySelector(".meplayer-lyric-current"),"meplayer-lyric-current"),L.querySelector(".meplayer-lyric-pre")&&F.removeClass(L.querySelector(".meplayer-lyric-pre"),"meplayer-lyric-pre"),L.querySelector(".meplayer-lyric-next")&&F.removeClass(L.querySelector(".meplayer-lyric-next"),"meplayer-lyric-next"),F.addClass(l,"meplayer-lyric-current"),i&&F.addClass(i,"meplayer-lyric-pre"),o&&F.addClass(o,"meplayer-lyric-next"),L.style.webkitTransform="translateY(-"+20*n+"px)",L.style.transform="translateY(-"+20*n+"px)")}}function A(){var e,t;v.paused?(v.play(),s!==N.THEME_DEFAULT||c||I.draw(),y.addEventListener("mousewheel",(t=null,e=function(e){t&&clearTimeout(t),y.className.includes("meplayer-adjusting-volume")||F.addClass(y,"meplayer-adjusting-volume"),e.wheelDeltaY<0&&.05<v.volume&&(v.volume-=.05),0<e.wheelDeltaY&&v.volume<.95&&(v.volume+=.05),s===N.THEME_DEFAULT?x.style.width=100*v.volume+"%":T.querySelector("i").style.opacity=v.volume,e.preventDefault(),t=setTimeout(function(){F.removeClass(y,"meplayer-adjusting-volume")},1e3)}))):(v.pause(),I.stop(),y.removeEventListener("mousewheel",e)),F.toggleClass(y,"meplayer-isplaying")}function q(){var e=(event.pageX-F.getAbsLeft(this))/this.offsetWidth;S.style.width=100*e+"%",v.currentTime=(e*p).toFixed(0)}},void 0!==n&&void 0!==n.exports&&(n.exports=P.mePlayer)}).call(e,function(){return this}())},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.THEME_DEFAULT="default",t.THEME_MINI="mini",t.LYRIC_CURRENT_CLASS="meplayer-lyric-current",t.LYRIC_NEXT_CLASS="meplayer-lyric-next"},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.currentIndex=t.renderTo=t.parse=void 0;var d,n=r(1);t.parse=function(e){for(var t=e.split("\n"),r=[],n=t.length,a=/\[(\d{2}):(\d{2})\.(\d{2,3})]/g,i=/\[(\d{2}):(\d{2})\.(\d{2,3})]/,l=0;l<n;l++){var o=t[l].match(a),s=t[l].replace(a,"").replace(/^\s+|\s+$/g,"");if(s&&null!=o)for(var c=o.length,u=0;u<c;u++){var p=i.exec(o[u]),y=60*p[1]+parseInt(p[2])+parseInt(p[3])/(2===(p[3]+"").length?100:1e3);r.push({time:y,text:s})}}return r.sort(function(e,t){return e.time-t.time}),d=r,this},t.renderTo=function(e){if(d){for(var t="",r=0;r<d.length;r++)t+="<p>"+d[r].text+"</p>";return e.innerHTML=t,e.querySelector("p").className=n.LYRIC_CURRENT_CLASS,e.querySelector("p + p").className=n.LYRIC_NEXT_CLASS,this}console.error("未指定歌词文本！")},t.currentIndex=function(e){if(e<d[0].time)return 0;for(var t=0,r=d.length;t<r&&!(e>=d[t].time&&(!d[t+1]||e<=d[t+1].time));t++);return t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toggleClass=function(e,t){if(e.classList)e.classList.toggle(t);else{var r=e.className.split(" "),n=r.indexOf(t);0<=n?r.splice(n,1):r.push(t),e.className=r.join(" ")}},t.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},t.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},t.getAbsLeft=function(e){for(var t=e.offsetLeft;e.offsetParent;)t+=(e=e.offsetParent).offsetLeft;return t},t.parseSec=function(e){var t=e/60|0,r=e%60|0;return(t<10?"0"+t:t)+":"+(r<10?"0"+r:r)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var l,o,s=[],r=!1,c=Math.random;function u(e){var t=28<1.5*e?28:1.5*e,r=.5<c()?1:-1,n=e;return function(){return t<=(n+=r)?(r*=-1,n=t):n<=1&&(r*=-1,n=1),.9<c()&&(r*=-1),n}}function n(){o.clearRect(0,-l.height/2,l.width,l.height);for(var e=0;e<s.length;e++){var t=s[e].getHeight();o.fillRect(e+s[e].xSpace,-t/2,s[e].width,t)}r||requestAnimationFrame(n)}t.init=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:220,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:30,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#D94240";(l=e).width=t,l.height=r,(o=l.getContext("2d")).fillStyle=n,o.translate(0,r/2);for(var a=0;a<64;a++){var i={xSpace:0==a?0:5*a,width:1,getHeight:u(.8<c()?8*c()+11:6*c()+2)};s.push(i)}},t.draw=function(){r=!1,n()},t.stop=function(){r=!0}},function(e,t){var c;function u(e,t){var r;return t=t||document,"string"==typeof e?r=t.querySelector(e):e.toString().includes("HTMLDivElement")&&(r=e),r}Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){return c=u(e),this},t.select=function(e){var t;if(Array.isArray(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s=l.value;r.push(u(s,c))}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}t=r}else t=u(e,c);return t},t.$=u}]);